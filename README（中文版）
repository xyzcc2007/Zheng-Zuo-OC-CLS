# 基于 RegNetY032 的卵巢癌分类深度学习框架  

---

## 简介
本仓库提供了一个基于 **RegNetY032 骨架**的深度学习代码，用于区分卵巢癌的良恶性。

前处理程序基于 [MMOTU_DS2Net](https://github.com/cv516Buaa/MMOTU_DS2Net) 修改，在联系并获得原作者授权后进行的。  
为尊重版权，我们推荐用户先查阅原始代码，并在获得作者授权后再使用。

---

## 环境需求
我们提供了conda环境包

---

## 输入数据格式
所需的 **Excel 文件**需至少包含以下列：

- **group**  
- **img_dir**（输入模型的图片路径）  
- **class**
- **设备域**（列名即是中文，如自己更改了请修改代码中对应处）

此外：

- 对应的 **mask 文件**需放在同一文件夹下。  
- 文件命名规则：  
  - ROI 图像 → `aaa_roi.png`  
  - 对应 mask → `aaa_mask.png`  
- excel文件路径由 **`defined_dataset.py`** 指定，基础增强扩充部分也由其完成。
- 我们运行时使用的图片为png格式（jpg格式应该可以，只需再dataset.py中做相应修改）。理论上此程序也能支持dcm图片（对应的mask为nrrd格式），但因是很久以前的版本，并未进一步维护，我们不保证运行一定成功。
- 代码的debug全部由claude完成。代码中的作图和计算95CI计算部分也由claude完成，我们后来有专门的代码完成这一步，因这部分代码与主任务无关，所以并未核对这部分代码的正确与否，若要应用请自行甄别。
- 代码中的全部注释及大部分print、logging由claude完成，请自行甄别。
---

## 使用说明
在运行程序之前，请确保 **库导入路径** 与程序所在的目录保持一致。

为看清运算过程，提供的最终融合版本为计算公式版，会影响AUC和AUPRC，实际使用时可简化为
    has_signal = image_prob > 0.5 or protein_prob > 0.5
    threshold = 0.470（即计算出的x值） if has_signal else 0.5
    return fused_prob > threshold
代码简单易维护且不会影响AUC和AUPRC，具体x值可参考我paper中的表格
---

## 许可与联系方式
> **注意：** 本代码仅供 **学术交流使用**。  
> 如需用于其他用途，请联系 **yanlu76@zju.edu.cn** 获取授权。  
> 如需进一步交流，可联系 **xyzcc2007@126.com**。

---

## 引用说明
若您在学术研究中使用了本代码，请在相关成果中进行适当引用并致谢作者。

