# Deep Learning Framework for Ovarian Cancer Classification  
*Based on RegNetY032 Backbone*

---

## Introduction
This repository provides deep learning code based on the **RegNetY032 backbone**, developed to distinguish between benign and malignant ovarian cancer.

The preprocessing pipeline is adapted from [MMOTU_DS2Net](https://github.com/cv516Buaa/MMOTU_DS2Net), with authorization obtained from the original authors.  
To respect copyright, we recommend that users review the original code and obtain authorization from the authors before using it.

---

## Environment
We provide a **conda environment package** and **pip requirements.txt**for reproducibility.Python version 3.10.

---

## Input Data Format
The required **Excel file** must contain at least the following columns:

- **group**  
- **img_dir** (the directory path of images to be fed into the model)  
- **class**  
- **设备域** (the column name is in Chinese by default; if you change it, please also update the corresponding code)

Additional notes:

- The corresponding **mask files** must be placed in the same folder.  
- Naming convention:  
  - ROI image → `aaa_roi.png`  
  - Corresponding mask → `aaa_mask.png`  
- The Excel file path is specified in **`defined_dataset.py`**, which also handles basic data augmentation.  
- We used **PNG images** for training. JPG images should also work with minor modifications in `dataset.py`. In theory, this code can also support **DICOM images** (with masks in **NRRD format**), but as this functionality comes from an older version and is no longer maintained, we cannot guarantee stable performance.  
- All debugging in this code was performed by **Claude**. The visualization and 95% CI calculations were also generated by Claude. Later, we developed dedicated scripts for these tasks. Since they are not essential to the main workflow, we did not verify their correctness; please use them at your own discretion.  
- All comments and most `print` / `logging` statements were generated by **Claude**; please review them as needed.  

---

## Usage
Before running the program, please ensure that the **library import paths** are consistent with the directory where your code is located.

To make the calculation process clearer, the Signal-guided malignancy enhancement strategy is presented in a formula-based form in final_multimodal（最终方案）.py, but this may affect AUC and AUPRC. In practical use, it can be simplified as follows:

has_signal = image_prob > 0.5 or protein_prob > 0.5
if has_signal：
  threshold = 0.468 #（calculated X value）
else：
  threshold = 0.5


This code is simple, easy to maintain, and will not affect AUC or AUPRC. The specific x value can be referenced from the tables in my paper.

---

## License & Contact
> **Note:** This code is provided **solely for academic exchange**.  
> For any other purposes, please contact **yanlu76@zju.edu.cn** for authorization.  
> For further communication, you may also reach out to **xyzcc2007@126.com**.

---

## Citation
If you use this code in academic research, please cite it appropriately and acknowledge the authors.
